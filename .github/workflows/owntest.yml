name: Owntest
on:
    push:
        branches: [main]
jobs:
    build:

        name: Build my virtual OS

        runs-on: ubuntu-latest

        steps:

        - name: checkout my codes
          uses: actions/checkout@v2

        - name: Print and list out content
          run: |
            ls
            echo Hello There!

        - name: Checkout repo remotely
          uses: actions/checkout@v2
          with:
            repository: jh3406/manualtest
            #path: <folder of choice>
            #token: ${{ secrets.SEC_TOKEN }}

        - name: install pytest
          run: |
            pip3 install pytest

        - name: Run test
          run: |
            pytest test_calculator.py
            cat README.md

        - name: Run tests
          run: pytest --junit-xml=test-results.xml

        - name: Surface failing tests
          if: always()
          uses: pmeier/pytest-results-action@main
          with:
            # A list of JUnit XML files, directories containing the former, and wildcard
            # patterns to process.
            # See @actions/glob for supported patterns.
            path: test-results.xml

            # Add a summary of the results at the top of the report
            # Default: true
            summary: true

            # Select which results should be included in the report.
            # Follows the same syntax as
            # `pytest -r`
            # Default: fEX
            display-options: fEX

            # Fail the workflow if no JUnit XML was found.
            # Default: true
            fail-on-empty: true